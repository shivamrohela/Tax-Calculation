<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tax Calculator</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    margin: 0;
    padding: 0;
  }

  .container {
    max-width: 600px;
    margin: 50px auto;
    padding: 20px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }

  h1 {
    text-align: center;
    color: #333;
  }

  form {
    margin-top: 20px;
  }

  label {
    display: block;
    margin-bottom: 5px;
    color: #555;
  }

  input[type="number"], select {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
  }

  .error {
    display: none;
    color: red;
    cursor: help;
  }

  button {
    display: block;
    width: 100%;
    padding: 10px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  button:hover {
    background-color: #45a049;
  }

  .modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
  }

  .modal-content {
    background-color: white;
    margin: 25% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 50%;
    border-radius: 5px;
  }

  .close {
    float: right;
    cursor: pointer;
  }

</style>
</head>
<body>

<div class="container">
  <h1>Tax Calculator</h1>
  <form id="taxForm">
    <div>
      <label for="age">Age:</label>
      <select id="age" name="age">
        <option value="<40">&lt; 40</option>
        <option value=">=40&<60">&ge; 40 &lt; 60</option>
        <option value=">=60">&ge; 60</option>
      </select>
    </div>
    <div>
      <label for="income">Gross Annual Income:</label>
      <input type="number" id="income" name="income">
      <span class="error" id="incomeError">!</span>
    </div>
    <div>
      <label for="extraIncome">Extra Income:</label>
      <input type="number" id="extraIncome" name="extraIncome">
      <span class="error" id="extraIncomeError">!</span>
    </div>
    <div>
      <label for="deductions">Deductions:</label>
      <input type="number" id="deductions" name="deductions">
      <span class="error" id="deductionsError">!</span>
    </div>
    <button type="submit">Submit</button>
  </form>
</div>

<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <p id="taxResult"></p>
  </div>
</div>

<script>
  // JavaScript code remains the same
  document.getElementById('taxForm').addEventListener('submit', function(event) {
    event.preventDefault();
    hideErrors();
  
    const age = document.getElementById('age').value;
    const income = parseFloat(document.getElementById('income').value);
    const extraIncome = parseFloat(document.getElementById('extraIncome').value);
    const deductions = parseFloat(document.getElementById('deductions').value);
  
    if (isNaN(income) || isNaN(extraIncome) || isNaN(deductions)) {
      showError('Please enter valid numbers.');
      return;
    }
  
    let taxRate;
    if (age === '<40') {
      taxRate = 0.3;
    } else if (age === '>=40&<60') {
      taxRate = 0.4;
    } else {
      taxRate = 0.1;
    }
  
    const taxableIncome = income + extraIncome - deductions;
    const taxAmount = taxableIncome > 800000 ? taxRate * (taxableIncome - 800000) : 0;
  
    showModal(taxAmount.toFixed(2));
  });
  
  function showError(message) {
    document.querySelectorAll('.error').forEach(function(error) {
      error.style.display = 'inline';
      error.setAttribute('title', message);
    });
  }
  
  function hideErrors() {
    document.querySelectorAll('.error').forEach(function(error) {
      error.style.display = 'none';
    });
  }
  
  function showModal(taxAmount) {
    document.getElementById('taxResult').textContent = `Tax Amount: ${taxAmount}`;
    document.getElementById('modal').style.display = 'block';
  }
  
  document.querySelector('.close').addEventListener('click', function() {
    document.getElementById('modal').style.display = 'none';
  });
  
</script>

</body>
</html>
